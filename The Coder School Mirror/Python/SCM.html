<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SuggestTube — Community‑Driven Video Platform (Demo)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root { --ring: 0 0% 100%; }
    html, body { height: 100%; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    /* Hide number input spinners */
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }
    /* Simple focus ring */
    .focus-ring:focus { outline: 2px solid rgb(59 130 246); outline-offset: 2px; }
    .glass { backdrop-filter: blur(8px); background: rgba(255,255,255,.7); }
    .dark .glass { background: rgba(17,24,39,.6); }
  </style>
</head>
<body class="min-h-screen bg-neutral-50 text-neutral-900">
  <!-- App Shell -->
  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="hidden lg:flex lg:w-72 border-r border-neutral-200 bg-white/80 backdrop-blur sticky top-0 h-screen flex-col">
      <div class="p-5 flex items-center gap-3">
        <div class="w-9 h-9 rounded-xl bg-gradient-to-tr from-rose-500 via-fuchsia-500 to-indigo-500"></div>
        <h1 class="text-xl font-extrabold tracking-tight">Suggest<span class="text-fuchsia-600">Tube</span></h1>
      </div>
      <nav class="px-3 py-2 space-y-1">
        <button class="w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-neutral-100 aria-selected:bg-neutral-200" aria-selected="true">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0h6"/></svg>
          <span class="font-medium">Home</span>
        </button>
        <button class="w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-neutral-100">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c-1.657 0-3 1.79-3 4s1.343 4 3 4 3-1.79 3-4-1.343-4-3-4z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2 12h4m12 0h4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M12 2v4m0 12v4"/></svg>
          <span class="font-medium">Trending</span>
        </button>
        <button class="w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-neutral-100" id="nav-suggestions">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 3a8 8 0 100 16A8 8 0 0011 3z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 7v6l4 2"/></svg>
          <span class="font-medium">Suggestions</span>
        </button>
      </nav>
      <div class="mt-auto p-4">
        <div class="p-4 rounded-2xl bg-gradient-to-br from-indigo-50 to-fuchsia-50 border border-neutral-200">
          <p class="text-sm font-medium">Tip</p>
          <p class="text-xs text-neutral-600 mt-1">Use the <span class="font-semibold">Creator Mode</span> toggle to claim suggestions and mark them fulfilled.</p>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="flex-1 flex flex-col">
      <!-- Top Bar -->
      <header class="sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-neutral-200">
        <div class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-3">
          <button class="lg:hidden p-2 rounded-lg hover:bg-neutral-100" aria-label="Menu">
            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16"/></svg>
          </button>
          <a href="#" class="flex items-center gap-2 mr-2">
            <div class="hidden sm:block w-7 h-7 rounded-lg bg-gradient-to-tr from-rose-500 via-fuchsia-500 to-indigo-500"></div>
            <span class="font-extrabold tracking-tight hidden sm:block">Suggest<span class="text-fuchsia-600">Tube</span></span>
          </a>
          <div class="flex-1">
            <label class="relative block">
              <input id="searchInput" type="search" placeholder="Search videos or suggestions" class="w-full focus-ring rounded-xl border border-neutral-300 px-4 py-2 pr-10" />
              <svg class="w-5 h-5 absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 100-15 7.5 7.5 0 000 15z"/></svg>
            </label>
          </div>
          <div class="flex items-center gap-2">
            <button id="newSuggestionBtn" class="px-3 py-2 rounded-xl bg-fuchsia-600 text-white font-semibold hover:opacity-95 focus-ring">New Suggestion</button>
            <label class="flex items-center gap-2 px-3 py-2 rounded-xl border border-neutral-300 cursor-pointer select-none">
              <input id="creatorToggle" type="checkbox" class="peer hidden"/>
              <span class="w-9 h-5 rounded-full bg-neutral-300 relative after:content-[''] after:absolute after:left-0.5 after:top-0.5 after:w-4 after:h-4 after:bg-white after:rounded-full after:transition-all peer-checked:bg-fuchsia-600 peer-checked:after:translate-x-4"></span>
              <span class="text-sm font-medium">Creator Mode</span>
            </label>
            <button class="p-2 rounded-xl hover:bg-neutral-100" aria-label="Notifications">
              <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V4a2 2 0 10-4 0v1.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>
            </button>
          </div>
        </div>
      </header>

      <!-- Content -->
      <div class="max-w-7xl mx-auto w-full px-4 py-6 grid grid-cols-1 xl:grid-cols-12 gap-6">
        <!-- Video Feed -->
        <section class="xl:col-span-8 space-y-6" aria-label="Video feed">
          <h2 class="text-lg font-semibold">For you</h2>
          <div id="videoGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Video cards will be injected here -->
          </div>
        </section>

        <!-- Suggestions Panel -->
        <aside class="xl:col-span-4 space-y-4" aria-label="Suggestions">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-semibold">Top Suggestions</h2>
            <div class="flex items-center gap-2 text-sm">
              <label class="sr-only" for="sortSelect">Sort</label>
              <select id="sortSelect" class="rounded-lg border border-neutral-300 px-2 py-1 focus-ring">
                <option value="votes">Most Votes</option>
                <option value="new">Newest</option>
                <option value="funding">Most Funded</option>
              </select>
              <label class="sr-only" for="filterSelect">Filter</label>
              <select id="filterSelect" class="rounded-lg border border-neutral-300 px-2 py-1 focus-ring">
                <option value="all">All</option>
                <option value="open">Open</option>
                <option value="claimed">Claimed</option>
                <option value="fulfilled">Fulfilled</option>
              </select>
            </div>
          </div>
          <div id="suggestionList" class="space-y-3">
            <!-- Suggestion cards injected here -->
          </div>
        </aside>
      </div>
    </main>
  </div>

  <!-- New Suggestion Modal -->
  <div id="modal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/40" aria-hidden="true"></div>
    <div class="relative w-full max-w-xl mx-auto bg-white rounded-2xl shadow-xl p-6">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-lg font-semibold">New Suggestion</h3>
        <button id="modalClose" class="p-2 rounded-lg hover:bg-neutral-100" aria-label="Close">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <form id="suggestionForm" class="space-y-3">
        <div>
          <label class="block text-sm font-medium mb-1" for="suggTitle">Title</label>
          <input id="suggTitle" required class="w-full rounded-xl border border-neutral-300 px-3 py-2 focus-ring" placeholder="e.g., Rank the best 2000s cartoons"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1" for="suggDesc">Description</label>
          <textarea id="suggDesc" rows="3" class="w-full rounded-xl border border-neutral-300 px-3 py-2 focus-ring" placeholder="Add any details, references, or constraints"></textarea>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium mb-1" for="suggTag">Category/Tag</label>
            <input id="suggTag" class="w-full rounded-xl border border-neutral-300 px-3 py-2 focus-ring" placeholder="e.g., reviews, tutorial"/>
          </div>
          <div>
            <label class="block text-sm font-medium mb-1" for="suggPledge">Pledge (optional)</label>
            <input id="suggPledge" type="number" min="0" step="1" class="w-full rounded-xl border border-neutral-300 px-3 py-2 focus-ring" placeholder="USD"/>
          </div>
        </div>
        <div class="flex items-center justify-end gap-2 pt-2">
          <button type="button" id="modalCancel" class="px-4 py-2 rounded-xl border border-neutral-300">Cancel</button>
          <button type="submit" class="px-4 py-2 rounded-xl bg-fuchsia-600 text-white font-semibold">Add Suggestion</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // --- Utilities ---
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));

    const store = {
      get(key, fallback){ try { return JSON.parse(localStorage.getItem(key)) ?? fallback } catch { return fallback } },
      set(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
    };

    // --- Sample Data ---
    const sampleVideos = [
      { id: 'v1', title: 'Street Food Tour in Tokyo (4K)', channel: 'Nomad Bytes', views: '1.2M views • 2 days ago' },
      { id: 'v2', title: 'I built an AI that writes songs', channel: 'DevWithDan', views: '413K views • 1 day ago' },
      { id: 'v3', title: 'Top 10 Cozy Indie Games', channel: 'IndiePix', views: '782K views • 5 days ago' },
      { id: 'v4', title: 'Beginner Workout — 20 mins no equipment', channel: 'FitKicks', views: '221K views • 10 hours ago' },
      { id: 'v5', title: 'How SSDs work (and fail)', channel: 'Bits & Bytes', views: '349K views • 3 days ago' },
      { id: 'v6', title: 'The Science of Sleep', channel: 'CurioLab', views: '1.9M views • 1 week ago' },
    ];

    const defaultSuggestions = [
      { id: 's1', title: 'Rank the best 2000s cartoons', desc: 'Include Avatar, Ben 10, Samurai Jack, Kim Possible, etc. Explain what makes each timeless.', tag: 'reviews', votes: 142, pledged: 28, status: 'open', author: 'Nova', ts: Date.now() - 86400000*2 },
      { id: 's2', title: 'Build a budget FPV drone', desc: 'A step-by-step tutorial under $200 with part links and tuning tips.', tag: 'tutorial', votes: 96, pledged: 74, status: 'claimed', author: 'Axel', ts: Date.now() - 86400000*1.5 },
      { id: 's3', title: 'React vs. Svelte in 2025', desc: 'Benchmarks, DX comparison, and when to pick each framework.', tag: 'dev', votes: 188, pledged: 12, status: 'open', author: 'Lin', ts: Date.now() - 86400000*0.4 },
      { id: 's4', title: '24h living by medieval rules', desc: 'Cooking, clothing, and chores using only historically accurate methods.', tag: 'challenge', votes: 73, pledged: 131, status: 'fulfilled', author: 'Mara', ts: Date.now() - 86400000*7 },
    ];

    // --- State ---
    let suggestions = store.get('suggestions', defaultSuggestions);
    let creatorMode = false;

    // --- Rendering: Videos ---
    function renderVideos(list){
      const grid = $('#videoGrid');
      grid.innerHTML = '';
      list.forEach(v => {
        const card = document.createElement('article');
        card.className = 'rounded-2xl overflow-hidden border border-neutral-200 bg-white hover:shadow transition';
        card.innerHTML = `
          <div class="aspect-video bg-gradient-to-br from-neutral-200 to-neutral-100"></div>
          <div class="p-3 flex gap-3">
            <div class="w-10 h-10 rounded-full bg-neutral-300"></div>
            <div class="flex-1">
              <h3 class="font-semibold leading-snug line-clamp-2">${v.title}</h3>
              <p class="text-sm text-neutral-600">${v.channel}</p>
              <p class="text-xs text-neutral-500">${v.views}</p>
            </div>
          </div>`;
        grid.appendChild(card);
      });
    }

    // --- Rendering: Suggestions ---
    function suggestionCard(s){
      const isClaimable = creatorMode && s.status === 'open';
      const isFulfillable = creatorMode && (s.status === 'open' || s.status === 'claimed');
      const statusColor = s.status === 'open' ? 'bg-emerald-100 text-emerald-700 border-emerald-200' : s.status === 'claimed' ? 'bg-amber-100 text-amber-700 border-amber-200' : 'bg-neutral-100 text-neutral-700 border-neutral-200';
      const statusLabel = s.status.charAt(0).toUpperCase() + s.status.slice(1);

      const el = document.createElement('div');
      el.className = 'border border-neutral-200 rounded-2xl bg-white p-4';
      el.innerHTML = `
        <div class="flex items-start gap-3">
          <button class="voteUp p-2 rounded-xl border border-neutral-200 hover:bg-neutral-100" aria-label="Upvote ${s.title}">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 15l7-7 7 7"/></svg>
          </button>
          <div class="flex-1 min-w-0">
            <div class="flex items-center gap-2 flex-wrap">
              <h3 class="font-semibold leading-tight">${s.title}</h3>
              <span class="text-xs px-2 py-0.5 rounded-full border ${statusColor}">${statusLabel}</span>
              ${s.tag ? `<span class="text-xs px-2 py-0.5 rounded-full bg-neutral-100 border border-neutral-200">#${s.tag}</span>` : ''}
            </div>
            <p class="text-sm text-neutral-700 mt-1">${s.desc || ''}</p>
            <div class="mt-2 text-xs text-neutral-500">Suggested by <span class="font-medium">${s.author || 'Anon'}</span> • ${timeAgo(s.ts)}</div>
            <div class="mt-3 flex items-center flex-wrap gap-2">
              <span class="text-sm font-semibold">${s.votes} votes</span>
              <span class="text-sm">$${s.pledged} pledged</span>
              <button class="fundBtn px-3 py-1.5 rounded-lg border border-neutral-300 hover:bg-neutral-100 text-sm">Fund +$5</button>
              <button class="downBtn px-2 py-1.5 rounded-lg border border-neutral-300 hover:bg-neutral-100 text-sm" aria-label="Downvote">–</button>
              ${isClaimable ? `<button class="claimBtn px-3 py-1.5 rounded-lg bg-indigo-600 text-white text-sm">Claim</button>` : ''}
              ${isFulfillable ? `<button class="fulfillBtn px-3 py-1.5 rounded-lg bg-emerald-600 text-white text-sm">Mark Fulfilled</button>` : ''}
            </div>
          </div>
        </div>`;

      // Event bindings
      $('.voteUp', el).addEventListener('click', () => { s.votes++; saveAndRender(); });
      $('.downBtn', el).addEventListener('click', () => { s.votes = Math.max(0, s.votes-1); saveAndRender(); });
      $('.fundBtn', el).addEventListener('click', () => { s.pledged += 5; saveAndRender(); });
      const claim = $('.claimBtn', el);
      if (claim) claim.addEventListener('click', () => { s.status = 'claimed'; saveAndRender(); });
      const fulfill = $('.fulfillBtn', el);
      if (fulfill) fulfill.addEventListener('click', () => { s.status = 'fulfilled'; saveAndRender(); });

      return el;
    }

    function renderSuggestions(){
      const listEl = $('#suggestionList');
      listEl.innerHTML = '';

      const sort = $('#sortSelect').value;
      const filter = $('#filterSelect').value;
      const query = $('#searchInput').value.trim().toLowerCase();

      let view = [...suggestions];

      if (filter !== 'all') view = view.filter(s => s.status === filter);
      if (query) view = view.filter(s => (s.title + ' ' + s.desc + ' ' + s.tag).toLowerCase().includes(query));

      if (sort === 'votes') view.sort((a,b) => b.votes - a.votes);
      if (sort === 'new') view.sort((a,b) => b.ts - a.ts);
      if (sort === 'funding') view.sort((a,b) => b.pledged - a.pledged);

      if (!view.length){
        listEl.innerHTML = `<div class="text-sm text-neutral-600 border border-dashed border-neutral-300 rounded-xl p-4">No suggestions match your filters. Try clearing search or switching filters.</div>`;
        return;
      }

      view.forEach(s => listEl.appendChild(suggestionCard(s)));
    }

    function saveAndRender(){
      store.set('suggestions', suggestions);
      renderSuggestions();
    }

    function timeAgo(ts){
      const diff = Math.max(1, Math.floor((Date.now() - ts)/1000));
      const units = [ ['year', 31536000], ['month', 2592000], ['week', 604800], ['day', 86400], ['hour', 3600], ['minute', 60], ['second', 1] ];
      for (const [name, secs] of units){
        const val = Math.floor(diff/secs);
        if (val >= 1) return `${val} ${name}${val>1?'s':''} ago`;
      }
      return 'just now';
    }

    // --- Modal Controls ---
    const modal = $('#modal');
    const openModal = () => modal.classList.remove('hidden');
    const closeModal = () => modal.classList.add('hidden');

    $('#newSuggestionBtn').addEventListener('click', openModal);
    $('#modalClose').addEventListener('click', closeModal);
    $('#modalCancel').addEventListener('click', closeModal);

    $('#suggestionForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const title = $('#suggTitle').value.trim();
      if (!title) return;
      const desc = $('#suggDesc').value.trim();
      const tag = $('#suggTag').value.trim();
      const pledgeVal = parseInt($('#suggPledge').value || '0', 10) || 0;

      const newItem = {
        id: 's' + Math.random().toString(36).slice(2, 8),
        title, desc, tag,
        votes: 1, pledged: pledgeVal, status: 'open', author: 'You', ts: Date.now()
      };
      suggestions.unshift(newItem);
      saveAndRender();
      e.target.reset();
      closeModal();
    });

    // --- Creator Mode Toggle ---
    $('#creatorToggle').addEventListener('change', (e) => {
      creatorMode = e.target.checked;
      renderSuggestions();
    });

    // --- Filters & Search ---
    $('#sortSelect').addEventListener('change', renderSuggestions);
    $('#filterSelect').addEventListener('change', renderSuggestions);
    $('#searchInput').addEventListener('input', () => { renderSuggestions(); filterVideos(); });

    // Simple search that filters video titles
    function filterVideos(){
      const q = $('#searchInput').value.trim().toLowerCase();
      const filtered = q ? sampleVideos.filter(v => (v.title + ' ' + v.channel).toLowerCase().includes(q)) : sampleVideos;
      renderVideos(filtered);
    }

    // --- Init ---
    renderVideos(sampleVideos);
    renderSuggestions();
  </script>
</body>
</html>
